<div id="tasksView-title">
  <% if (viewType === "tasksView")  { %>
  <%= listTitle %>
  <% } else if (viewType === "todayView") { %>
  Today
  <% } else { %>
  Unplanned
  <% } %>
  <br><br><br>
</div>

<div id="task-overall-info">  
  <!-- Completed Tasks -->
  <% var completedTasks = _.where(tasks.toJSON(), {complete: true}) %>
  
  <!-- Pending Tasks -->
  <% var pendingTasks = _.where(tasks.toJSON(), {complete: false}); %>
  
  <!-- Actual Pomodoros Count -->
  <% var actualPomodorosCount = _.flatten(_.map(tasks.toJSON(), function(task) {
    return task.pomodoro_actual })
    ); %>
  <% var pomAchieved = _.reduce(actualPomodorosCount, function(memo,num){
    return memo+num 
    }, 0); %>

  <!-- Pending Pomodoros Count -->
  <% var expectedPomodorosCount = _.flatten(_.map(pendingTasks, function(task) {
    return task.pomodoro_expected })
    ); %>
    
    <% var pomPending = _.reduce(expectedPomodorosCount, function(memo,num){ 
      return memo+num 
      }, 0); %>

  <% if (viewType !== "todayView") { %>
    <span class="glyphicon glyphicon-check"></span> : <%= completedTasks.length %>
    <span class="glyphicon glyphicon-unchecked"></span> : <%= pendingTasks.length %>
  <% } %>
  <span class="glyphicon glyphicon-star"></span> : <%= pomAchieved %>
  <span class="glyphicon glyphicon-star-empty"></span> : <%= pomPending %>
  <br><br>
  
  <% if (viewType !== "tasksView") { %>
    <br>
  <% } %>
</div>

<div id="task-view-content" class="clearfix">
  <% if (viewType === "tasksView")  { %>
    <!-- Add Task Button -->
    <button id="show-task-form" 
            class="ui-button ui-widget ui-state-default ui-corner-all
                   ui-button-text-only" 
                   role="button" 
                   aria-disabled="false" 
                   style="font-size: 12px; color: #cc0000">
                   <span class="ui-button-text">Add New Task</span>
    </button>

    <!-- Add Task Form -->
    <div id="task-utility" class="hidden clearfix">
      <form id="task-form">
        <!-- Task Name -->
        <input type="text" name="task[title]">
    
        <!-- Add Task Button -->
        <button class="ui-state-default ui-corner-all" 
                title=".ui-icon-plusthick" 
                id="submit-task-form">
                <span class="ui-icon ui-icon-plus"></span>
        </button>
      </form>
  
        <!-- Remove Form Button -->
        <button class="ui-state-default ui-corner-all" 
                title=".ui-icon-close"
                id="remove-task-form">
                <span class="ui-icon ui-icon-close"></span>
        </button>
    </div>
  <% } %>

  <!-- Clear Floats -->
  <div class="clearfix"></div>

  <!-- render tasks views here -->
  <ul id="task-content"></ul>
</div>
  
  <!-- Timer Box -->
<% if (viewType === "todayView") { %>
  <div id="timer-window" class="hidden">
    <div class="timer-content">
      I'm a timer box!
      <div class="timer-time">25:00</div>
      <br>
      <a href="#" class="task-begin-timer">Start</a>
      <a href="#" class="task-reset-timer">Reset</a>
      <a href="#" class="task-close-timer">Close</a>
    </div>
  </div>
<% } %>

<script>
  $(function() {
    $('button').button();
    
    // Display Add Task Form
    $('#show-task-form').click(function() {
      $('#show-task-form').addClass('hidden');
      $('#task-utility').removeClass('hidden');
    });
    
    // Remove Add Task Form
    $('#remove-task-form').click(function() {
      $('#task-utility').addClass('hidden');
      $('#show-task-form').removeClass('hidden');
    });
    
  });
</script>